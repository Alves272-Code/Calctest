<!DOCTYPE html>
<html lang="pt-PT">
<head>
<meta charset="UTF-8">
<title>Calculadoras Online</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f7f7f7;
    padding-top: 150px;
  }
  header {
    background: white;
    text-align: center;
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 1000;
    border-bottom: 2px solid #ddd;
  }
  header img {
    height: 150px;
    display: block;
    margin: auto;
  }
  nav {
    background: #0077B6;
    display: flex;
    justify-content: center;
    padding: 10px;
    flex-wrap: wrap;
  }
  .menu-btn {
    background: #fff;
    border: none;
    padding: 10px 15px;
    margin: 5px;
    cursor: pointer;
    border-radius: 5px;
    color: #0077B6;
    font-weight: bold;
  }
  .menu-btn.active {
    background: #023E8A;
    color: white;
  }
  .container {
    max-width: 900px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    display: none;
  }
  .container.active {
    display: block;
  }
  footer {
    background: #023E8A;
    color: white;
    text-align: center;
    padding: 20px;
    margin-top: 40px;
  }
  footer a {
    background: gold;
    color: black;
    padding: 10px 20px;
    border-radius: 5px;
    text-decoration: none;
    font-weight: bold;
  }
</style>
</head>
<body>

<header>
  <img src="https://via.placeholder.com/300x150.png?text=LOGO" alt="Logo">
  <nav>
    <button class="menu-btn active" onclick="showCalc('calc1', this)">Despesas vs Rendimentos</button>
    <button class="menu-btn" onclick="showCalc('calc2', this)">Calcular IMC</button>
    <button class="menu-btn" onclick="showCalc('calc3', this)">Conversor Medidas PC</button>
  </nav>
</header>

<!-- Calculadora 1 -->
<div class="container active" id="calc1">
  <h2>Despesas vs Rendimentos</h2>
  <div>
    <input type="text" id="nomeRendimento" placeholder="Descrição rendimento">
    <input type="number" id="valorRendimento" placeholder="Valor rendimento">
    <button onclick="adicionarRendimento()">Adicionar Rendimento</button>
  </div>
  <div>
    <input type="text" id="nomeDespesa" placeholder="Descrição despesa">
    <input type="number" id="valorDespesa" placeholder="Valor despesa">
    <input type="text" id="categoriaDespesa" placeholder="Categoria despesa">
    <button onclick="adicionarDespesa()">Adicionar Despesa</button>
  </div>
  <div id="resultado"></div>
  <canvas id="grafico" width="400" height="200"></canvas>
  <button onclick="exportCSV()">Exportar CSV</button>
  <button onclick="exportPDF()">Exportar PDF</button>
</div>

<!-- Calculadora 2 -->
<div class="container" id="calc2">
  <h2>Calculadora de IMC</h2>
  <input type="number" id="peso" placeholder="Peso (kg)">
  <input type="number" id="altura" placeholder="Altura (m)" step="0.01">
  <button onclick="calcularIMC()">Calcular</button>
  <div id="resultadoIMC"></div>
</div>

<!-- Calculadora 3 -->
<div class="container" id="calc3">
  <h2>Conversor de Medidas de Computador</h2>
  <input type="number" id="valorBytes" placeholder="Valor">
  <select id="unidadeOrigem">
    <option value="B">Bytes</option>
    <option value="KB">Kilobytes</option>
    <option value="MB">Megabytes</option>
    <option value="GB">Gigabytes</option>
    <option value="TB">Terabytes</option>
  </select>
  <button onclick="converterMedidas()">Converter</button>
  <div id="resultadoConversao"></div>
</div>

<footer>
  <p>© 2025 Calculadoras Online</p>
  <a href="https://www.paypal.com/donate" target="_blank">Doar</a>
</footer>

<script>
let rendimentos = [];
let despesas = [];
let grafico;

// alternar calculadoras
function showCalc(id, btn) {
  document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}

// ajustar padding dinamicamente
function ajustarPaddingBody() {
  const headerHeight = document.querySelector('header').offsetHeight;
  document.body.style.paddingTop = headerHeight + 'px';
}
window.addEventListener('load', ajustarPaddingBody);
window.addEventListener('resize', ajustarPaddingBody);

// calculadora despesas vs rendimentos
function adicionarRendimento() {
  const nome = document.getElementById('nomeRendimento').value;
  const valor = parseFloat(document.getElementById('valorRendimento').value);
  if (nome && valor) {
    rendimentos.push({ nome, valor });
    atualizarResultados();
  }
}
function adicionarDespesa() {
  const nome = document.getElementById('nomeDespesa').value;
  const valor = parseFloat(document.getElementById('valorDespesa').value);
  const categoria = document.getElementById('categoriaDespesa').value;
  if (nome && valor && categoria) {
    despesas.push({ nome, valor, categoria });
    atualizarResultados();
  }
}
function atualizarResultados() {
  let totalRendimentos = rendimentos.reduce((a,b) => a + b.valor, 0);
  let totalDespesas = despesas.reduce((a,b) => a + b.valor, 0);
  let sobra = totalRendimentos - totalDespesas;

  let despesasPorCategoria = {};
  despesas.forEach(d => {
    despesasPorCategoria[d.categoria] = (despesasPorCategoria[d.categoria] || 0) + d.valor;
  });

  let html = `Total Rendimentos: €${totalRendimentos.toFixed(2)}<br>
              Total Despesas: €${totalDespesas.toFixed(2)}<br>
              Sobra: €${sobra.toFixed(2)}<br>
              <strong>Despesas por Categoria:</strong><br>`;
  for (let cat in despesasPorCategoria) {
    html += `${cat}: €${despesasPorCategoria[cat].toFixed(2)}<br>`;
  }
  document.getElementById('resultado').innerHTML = html;

  // atualizar gráfico
  if (grafico) grafico.destroy();
  grafico = new Chart(document.getElementById('grafico'), {
    type: 'pie',
    data: {
      labels: Object.keys(despesasPorCategoria),
      datasets: [{
        data: Object.values(despesasPorCategoria),
        backgroundColor: ['#0077B6', '#00B4D8', '#90E0EF', '#CAF0F8', '#03045E']
      }]
    }
  });
}
function exportCSV() {
  let csv = "Descrição,Valor,Tipo,Categoria\n";
  rendimentos.forEach(r => {
    csv += `${r.nome},${r.valor},Rendimento,\n`;
  });
  despesas.forEach(d => {
    csv += `${d.nome},${d.valor},Despesa,${d.categoria}\n`;
  });
  let totalRend = rendimentos.reduce((a,b)=>a+b.valor,0);
  let totalDesp = despesas.reduce((a,b)=>a+b.valor,0);
  let sobra = totalRend - totalDesp;
  csv += `Total Rendimentos,${totalRend}\nTotal Despesas,${totalDesp}\nSobra,${sobra}`;
  let blob = new Blob([csv], { type: 'text/csv' });
  let url = URL.createObjectURL(blob);
  let a = document.createElement('a');
  a.href = url;
  a.download = 'orcamento.csv';
  a.click();
}
function exportPDF() {
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();
  let y = 10;
  pdf.setFontSize(18);
  pdf.setTextColor(0, 119, 182);
  pdf.text('Resumo do Orçamento', 105, y, { align: 'center' });
  y += 15;

  let totalRend = rendimentos.reduce((a,b)=>a+b.valor,0);
  let totalDesp = despesas.reduce((a,b)=>a+b.valor,0);
  let sobra = totalRend - totalDesp;

  pdf.setFontSize(12);
  pdf.setTextColor(0,0,0);
  pdf.text(`Total Rendimentos: €${totalRend.toFixed(2)}`, 10, y); y+=7;
  pdf.text(`Total Despesas: €${totalDesp.toFixed(2)}`, 10, y); y+=7;
  pdf.text(`Sobra: €${sobra.toFixed(2)}`, 10, y); y+=10;

  pdf.text("Despesas por Categoria:", 10, y); y+=7;
  let despesasPorCategoria = {};
  despesas.forEach(d => {
    despesasPorCategoria[d.categoria] = (despesasPorCategoria[d.categoria] || 0) + d.valor;
  });
  for (let cat in despesasPorCategoria) {
    pdf.text(`${cat}: €${despesasPorCategoria[cat].toFixed(2)}`, 10, y); y+=7;
  }
  y += 10;
  const canvas = document.getElementById('grafico');
  const imgData = canvas.toDataURL('image/png');
  const pageWidth = pdf.internal.pageSize.getWidth();
  const imgProps = pdf.getImageProperties(imgData);
  const imgHeight = (imgProps.height * pageWidth) / imgProps.width;
  pdf.addImage(imgData, 'PNG', 0, y, pageWidth, imgHeight);
  pdf.save('orcamento_resumo.pdf');
}

// calculadora imc
function calcularIMC() {
  let peso = parseFloat(document.getElementById('peso').value);
  let altura = parseFloat(document.getElementById('altura').value);
  if (peso > 0 && altura > 0) {
    let imc = peso / (altura * altura);
    let classificacao = "";
    if (imc < 18.5) classificacao = "Abaixo do peso";
    else if (imc < 25) classificacao = "Peso normal";
    else if (imc < 30) classificacao = "Sobrepeso";
    else classificacao = "Obesidade";
    document.getElementById('resultadoIMC').innerText = `IMC: ${imc.toFixed(2)} - ${classificacao}`;
  }
}

// conversor medidas pc
function converterMedidas() {
  let valor = parseFloat(document.getElementById('valorBytes').value);
  let unidade = document.getElementById('unidadeOrigem').value;
  if (valor >= 0) {
    let bytes = valor;
    if (unidade === 'KB') bytes *= 1024;
    if (unidade === 'MB') bytes *= 1024**2;
    if (unidade === 'GB') bytes *= 1024**3;
    if (unidade === 'TB') bytes *= 1024**4;
    let result = `
      Bytes: ${bytes} B<br>
      KB: ${(bytes/1024).toFixed(2)} KB<br>
      MB: ${(bytes/1024**2).toFixed(2)} MB<br>
      GB: ${(bytes/1024**3).toFixed(2)} GB<br>
      TB: ${(bytes/1024**4).toFixed(2)} TB
    `;
    document.getElementById('resultadoConversao').innerHTML = result;
  }
}
</script>
</body>
</html>
